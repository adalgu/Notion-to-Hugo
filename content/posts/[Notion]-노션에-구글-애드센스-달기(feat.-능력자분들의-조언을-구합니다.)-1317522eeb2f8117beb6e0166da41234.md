---
title: "[Notion] 노션에 구글 애드센스 달기(feat. 능력자분들의 조언을 구합니다.)"
date: "2024-11-01T18:07:00.000Z"
lastmod: "2024-11-01T18:16:00.000Z"
draft: false
featuredImage: "https://images.unsplash.com/photo-1599658880436-c61792e70672?ix\
  lib=rb-1.2.1&q=85&fm=jpg&crop=entropy&cs=srgb"
series: []
Published: "2022-10-21T01:53:00.000+00:00"
tags: []
categories: []
Featured: false
Author: "Gunn Kim"
authors:
  - "Gunn Kim"
Status: "Done"
Public: true
NOTION_METADATA:
  object: "page"
  id: "1317522e-eb2f-8117-beb6-e0166da41234"
  created_time: "2024-11-01T18:07:00.000Z"
  last_edited_time: "2024-11-01T18:16:00.000Z"
  created_by:
    object: "user"
    id: "04ade8dc-857d-40ba-9484-61bf41015314"
  last_edited_by:
    object: "user"
    id: "a3871fb7-da3a-40d9-96a3-c7e4e39081e2"
  cover:
    type: "external"
    external:
      url: "https://images.unsplash.com/photo-1599658880436-c61792e70672?ixlib=rb-1.2\
        .1&q=85&fm=jpg&crop=entropy&cs=srgb"
  icon: null
  parent:
    type: "database_id"
    database_id: "8229e4e4-34a6-47f7-b098-c86b7cd83ad6"
  archived: false
  in_trash: false
  properties:
    Created:
      id: "Aqll"
      type: "created_time"
      created_time: "2024-11-01T18:07:00.000Z"
    series:
      id: "B%3C%3FS"
      type: "multi_select"
      multi_select: []
    Subtitle:
      id: "DD_F"
      type: "rich_text"
      rich_text: []
    Page ID:
      id: "FqAD"
      type: "formula"
      formula:
        type: "string"
        string: "1317522eeb2f8117beb6e0166da41234"
    draft:
      id: "JiWU"
      type: "checkbox"
      checkbox: false
    Last Updated:
      id: "%5C%5BBm"
      type: "last_edited_time"
      last_edited_time: "2024-11-01T18:16:00.000Z"
    Tweet:
      id: "%60SwQ"
      type: "rich_text"
      rich_text: []
    authors:
      id: "bK%3B%5B"
      type: "people"
      people: []
    custom-front-matter:
      id: "c~kA"
      type: "rich_text"
      rich_text: []
    Slug:
      id: "fRDG"
      type: "rich_text"
      rich_text: []
    Published:
      id: "fy%3Ft"
      type: "date"
      date:
        start: "2022-10-21T01:53:00.000+00:00"
        end: null
        time_zone: null
    tags:
      id: "jw%7CC"
      type: "multi_select"
      multi_select: []
    categories:
      id: "nbY%3F"
      type: "multi_select"
      multi_select: []
    Featured:
      id: "oN%3F%3A"
      type: "checkbox"
      checkbox: false
    summary:
      id: "x%3AlD"
      type: "rich_text"
      rich_text: []
    Name:
      id: "title"
      type: "title"
      title:
        - type: "text"
          text:
            content: "[Notion] 노션에 구글 애드센스 달기(feat. 능력자분들의 조언을 구합니다.)"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "[Notion] 노션에 구글 애드센스 달기(feat. 능력자분들의 조언을 구합니다.)"
          href: null
    Author:
      id: "1f9a8ffc-dde9-4927-a747-6e2c304d6bd7"
      type: "rich_text"
      rich_text:
        - type: "text"
          text:
            content: "Gunn Kim"
            link: null
          annotations:
            bold: false
            italic: false
            strikethrough: false
            underline: false
            code: false
            color: "default"
          plain_text: "Gunn Kim"
          href: null
    Status:
      id: "6980bb35-4874-4a92-9a8b-26cece24bfd0"
      type: "status"
      status:
        id: "93da1c50-b6e1-4627-8a1c-e289898a5b3e"
        name: "Done"
        color: "green"
    Public:
      id: "8b3317bf-8bd9-4e07-b430-829f6408dd57"
      type: "checkbox"
      checkbox: true
    Description:
      id: "a8a234b4-277e-4754-9339-c588720def12"
      type: "rich_text"
      rich_text: []
  url: "https://www.notion.so/Notion-feat-1317522eeb2f8117beb6e0166da41234"
  public_url: "https://datarecipe.notion.site/Notion-feat-1317522eeb2f8117beb6e0166da41234"
UPDATE_TIME: "2024-11-01T18:48:18.610Z"
EXPIRY_TIME: "2024-11-01T19:48:07.023Z"

---


> 💸 노션에 구글 애드센스 달기가 가능한 것으로 확인하고, 막바지 단계까지 간듯 했으나 막혀 있습니다. 클라우드플레어 워커스에서 구글 애드센스 스크립트 삽입 부분에 대한 도움 부탁드립니다.  
> 현재 cloudflare workers로 애드센스 달려고 시도중인 노션 페이지는 [https://notion.gunn.kim](https://notion.gunn.kim/) 입니다.


## 노션에 구글 애드센스 달기가 가능한가?

![](https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fdatarecipe.notion.site%2FNotion-feat-b1f78c72991442fba28802a6c152e768&count_bg=%2379C83D&title_bg=%23555555&icon=&icon_color=%23E7E7E7&title=hits&edge_flat=true)

- 원래는 불가능하지만, 트릭을 쓰면 가능하다
- 현재 페이지, [oopy.gunn.kim](https://oopy.gunn.kim/)(아래 그림 왼쪽)으로 접속하면 하단에 배너가 뜨는 것을 볼 수 있다.
	- (참고: ~21년 9월 12일 oopy 사용 종료 예정, 이후에는 클라우드플레어로 연결합니다.)

![동일한 노션 페이지를 우피로 접속하면 애드센스 작동](https://prod-files-secure.s3.us-west-2.amazonaws.com/94f51666-273a-443d-bf89-42827b5b6876/658949b9-509f-49a9-aec0-bd44be464b8c/KakaoTalk_Photo_2021-09-06-03-25-09_001.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45GO43JXI4%2F20241101%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20241101T184808Z&X-Amz-Expires=3600&X-Amz-Signature=13fb2e8a40df86c1869f25ecdb54e52623b39e2f7fe034c52b207d05d3e90054&X-Amz-SignedHeaders=host&x-id=GetObject)

![원래 노션 페이지 주소로 접속하면 광고 안뜸](https://prod-files-secure.s3.us-west-2.amazonaws.com/94f51666-273a-443d-bf89-42827b5b6876/1fff7b37-96fe-4ac8-8eca-da21cc0db58c/KakaoTalk_Photo_2021-09-06-03-25-10_002.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45GO43JXI4%2F20241101%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20241101T184808Z&X-Amz-Expires=3600&X-Amz-Signature=837f2ce21a14ca22c9112b51bfc4c2b04313b5f51e17787fe3b18ac1239c7d4f&X-Amz-SignedHeaders=host&x-id=GetObject)


## 우피에서 구글 애드센스가 가능하다는 점은 두가지 힌트를 암시한다.


힌트 1) 이미 허가받은 구글 애드센스 계정과 해당 도메인을 활용한다. (노션 페이지만으로 웹사이트를 만들고 심사를 받는 것은 가능은 할테지만, 통과가 쉽지는 않을듯)


ㄴ 이미 구글 애드센스를 허가받은 도메인의 하위 네임을 이용하면 상대적으로 쉬울 것으로 보인다. 예를 들어, [https://gunn.kim](https://gunn.kim/) 으로 허가받은 애드센스가 있다면, https://oopy.gunn.kim에 무리없이 애드센스를 달 수 있다는 것을 확인할 수 있다.


힌트 2) Cloudflare Workers를 이용하여 웹사이트 부를 때 애드센스 코드를 불러서 노션 페이지에 레이어로 올려준다.


ㄴ 일부 능력자들이 이미 시도한 것을 볼 수 있는데, 우피가 아마도 유사한 방식을 채택한 것으로 생각된다.


[https://www.facebook.com/groups/notion.so/permalink/1040808083047842/](https://www.facebook.com/groups/notion.so/permalink/1040808083047842/)


![](https://prod-files-secure.s3.us-west-2.amazonaws.com/94f51666-273a-443d-bf89-42827b5b6876/9cdd736c-cfd8-4eb8-919b-a905146f2a03/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45GO43JXI4%2F20241101%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20241101T184807Z&X-Amz-Expires=3600&X-Amz-Signature=63408e34115015754edebce3b09b94ea49b19d405e84504d079855f10ff8b556&X-Amz-SignedHeaders=host&x-id=GetObject)


## 결론적으로, 


노션에 구글 애드센스를 달 수 있다. 다만, 개인 도메인을 보유하고 있고, 이를 이용해서 애드센스 고시를 통과한 상태에서 설치가 용이한 점을 확인할 수 있다.


그렇다면, 우피를 이용하지 않고, 개인 도메인만으로 노션에 애드센스를 달 수 있는 방법은 무엇인가?


위 페이스북 캡쳐에 있듯이, Cloudflare의 Workers와 App을 이용해야 한다. 즉, 클라우드플레어 워커스를 이용해서 노션 웹페이지 로딩할때 구글애드센스 스크립트를 로딩하도록 하는 것.

1. Cloudflare workers에 애드센스 스크립트를 삽입한다.

	```html
	const adsense = '<script data-ad-client="ca-pub-369509860207****" async src="https://pagead2.googlesyndication.com/.../js/adsbygoogle.js"></script>';
	```

1. Cloudflare App을 이용하여 ads.txt 추가한다.(Quick을 이용하는 방식)
	1. [https://community.cloudflare.com/t/how-to-set-up-ads-txt-file-in-cloudflare/123456/8?fbclid=IwAR0H71RaleuQegnxU82NdSr0twWzfCoEFsTUnyyfLuUDN-Qr21EVPesbrsE](https://community.cloudflare.com/t/how-to-set-up-ads-txt-file-in-cloudflare/123456/8?fbclid=IwAR0H71RaleuQegnxU82NdSr0twWzfCoEFsTUnyyfLuUDN-Qr21EVPesbrsE)

	![](https://prod-files-secure.s3.us-west-2.amazonaws.com/94f51666-273a-443d-bf89-42827b5b6876/8f1a3924-e015-41f1-b546-8c6dab9386b2/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45GO43JXI4%2F20241101%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20241101T184809Z&X-Amz-Expires=3600&X-Amz-Signature=d670e918f98671946b07c4b580f2bb72ed53e10ca55b808dadbd75d7fb5acacb&X-Amz-SignedHeaders=host&x-id=GetObject)


	b. 클라우드플레어 App에서 퀵을 설치한 모습


	![](https://prod-files-secure.s3.us-west-2.amazonaws.com/94f51666-273a-443d-bf89-42827b5b6876/0e91cd1e-3200-4d65-b475-35e7c844443c/Untitled.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=AKIAT73L2G45GO43JXI4%2F20241101%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20241101T184809Z&X-Amz-Expires=3600&X-Amz-Signature=6754aa28e0ebdb5caa9e73240b7b1202118b86954063600b0581fc5f217fa839&X-Amz-SignedHeaders=host&x-id=GetObject)


### 여기까지 다 수행한 상황이나 아직 목표한 [https://notion.gunn.kim](https://notion.gunn.kim/) 에 뜨지 않는 상황이다.


> 💸 능력자분들의 조언을 구합니다. 아래 해결책에서 추가 조언이 있으면 감사히 듣겠습니다.


### 해결책은?


1) 위에까지 하고, 아래 코드를 노션 페이지에서 불러오도록 만들면 해결될 것으로 보이는데, 아직 완전히 문제를 해소하지는 못하고 있다. (Help me!)


```html
<!-- notion-ad -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-369509860207****"
     data-ad-slot="**********"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
```


2) Workers Example을 참고해서, body에 위 코드를 fetch하면 되지 않을까?라고 생각 중이다.


구글 애드센스 스크립트를 cloudflare workers에서 불러오는 것이 방법이긴 할 것 같은데, 조금 더 공부가 필요한 상황이다.


> Fetch HTML  
> Send a request to a remote server, read HTML from the response, and serve that HTML.


[https://developers.cloudflare.com/workers/examples/fetch-html](https://developers.cloudflare.com/workers/examples/fetch-html)


```javascript

/**
 * Example someHost at url is set up to respond with HTML
 * Replace url with the host you wish to send requests to
 */
const someHost = "https://examples.cloudflareworkers.com/demos"
/**  const url = someHost + "/static/html" */

const url = `
<!doctype html>
<html lang="en">
<body>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-369509860207****"
     crossorigin="anonymous"></script>
<!-- 사각형 디스플레이 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-369509860207****"
     data-ad-slot="301574****"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</body>
</html>
`

/**
 * gatherResponse awaits and returns a response body as a string.
 * Use await gatherResponse(..) in an async function to get the response body
 * @param {Response} response
 */
async function gatherResponse(response) {
  const { headers } = response
  const contentType = headers.get("content-type") || ""
  if (contentType.includes("application/json")) {
    return JSON.stringify(await response.json())
  }
  else if (contentType.includes("application/text")) {
    return response.text()
  }
  else if (contentType.includes("text/html")) {
    return response.text()
  }
  else {
    return response.text()
  }
}

async function handleRequest() {
  const init = {
    headers: {
      "content-type": "text/html;charset=UTF-8",
    },
  }
  const response = await fetch(url, init)
  const results = await gatherResponse(response)
  return new Response(results, init)
}

addEventListener("fetch", event => {
  return event.respondWith(handleRequest())
})
```


완전히 작동할 때까지 가즈아~!! 끝.


[[Notion] 노션과 도메인 연결하기]({{% relref "[Notion]-노션과-도메인-연결하기-1317522eeb2f8106afc6dbe34f1c0f53.md" %}}) 


[[Notion] 노션 페이지에 구글 애널리틱스(GA) 넣기]({{% relref "[Notion]-노션-페이지에-구글-애널리틱스(GA)-넣기-1317522eeb2f816f8fe4c6bf47378c80.md" %}}) 


[[Notion] 노션에 방문자 카운트 삽입]({{% relref "[Notion]-노션에-방문자-카운트-삽입-1317522eeb2f8102b066ca5da8abbccf.md" %}}) 


[https://brunch.co.kr/@technomics](https://brunch.co.kr/@technomics)


[https://gunn.kim/post/2020-06-13-seoul-metro-data-openapi/](https://gunn.kim/post/2020-06-13-seoul-metro-data-openapi/)

